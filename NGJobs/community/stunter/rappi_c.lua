setElementData(localPlayer,"Rappi",false)
buyPosLS = {
	{1209.34, -892.94, 42.93},
	{926.06, -1348.89, 13.39},
	{793.88, -1626.33, 13.38},
	{2097.19, -1806.91, 13.55},
	{2410.26, -1488.62, 23.83},
	{1348.33, -1757.56, 13.51},
	{1560.14, -1850.78, 13.55},
	{1847.78, -1871.88, 13.58},
	{1680.63, -1832.87, 13.55},
	{1941.84, -2118.29, 13.56},
	{1949.18, -1985.06, 13.55},
	{2388.07, -1545.74, 24},
	{2362.88, -1340.26, 24.01},
	{2406.21, -1240.09, 23.81},
	{2152.23, -1013.89, 62.82},
	{1544.78, -1170.59, 24.08},
	{1309.04, -899.96, 39.58},
	{1074.32, -1303.82, 17.05},
	{1037.42, -1340.66, 13.74},
	{1045.41, -1269.21, 13.68},
	{376.56, -2054.09, 8.02}

}

deliverPosLS ={
	{298.93, -1338.25, 53.44},
	{355.17, -1281.14, 53.7},
	{408.06, -1267.07, 50.02},
	{424.75, -1267.27, 51.58},
	{725.55, -1276.34, 13.65},
	{782.95, -1464.49, 13.55},
	{813.52, -1456.79, 14.15},
	{771.49, -1510.44, 13.55},
	{761.82, -1564.06, 13.55},
	{765.41, -1602.24, 13.46},
	{692.86, -1602.1, 15.05},
	{651.54, -1640.39, 14.99},
	{655.05, -1657.03, 14.53},
	{651.65, -1698.65, 14.64},
	{652.48, -1720.9, 14.76},
	{694.59, -1698.58, 3.81},
	{695.53, -1685.65, 4.35},
	{768.31, -1703.57, 5.15},
	{799.01, -1726.99, 13.55},
	{795.45, -1701.59, 14.03},
	{863.81, -1635.5, 14.93},
	{854.55, -1686.18, 14.76},
	{883, -1799.67, 13.79},
	{866.56, -1798.93, 13.82},
	{1082, -1862.14, 13.55},
	{1691.31, -2124.12, 13.55},
	{1673.66, -2122.4, 14.15},
	{1673.07, -2108.63, 13.55},
	{1684.8, -2098.65, 13.83},
	{1707.45, -2102.52, 13.55},
	{1712.04, -2124.54, 13.55},
	{1738.35, -2098.69, 13.55},
	{1936.84, -1917.59, 15.03},
	{1890.9, -1918.47, 15.03},
	{2145.95, -1431.69, 25.54},
	{2148.13, -1445.04, 25.54},
	{2129.51, -1363.71, 25.55},
	{2146.83, -1370.54, 25.54},
	{2326.96, -1252.61, 27.98},
	{2247.05, -1455.23, 24},
	{2122.57, -1314.38, 25.54},
	{1995.1, -1118.59, 26.77},
	{2052.26, -1070.65, 24.84},
	{2176.6, -986.8, 64.47},
	{2348.15, -1045.92, 53.92},
	{507.2, -1607.29, 16.44},
	{323.89, -1771.31, 4.8},
	{292.54, -1766.76, 4.55},
	{194.16, -1746.67, 4.33},
	{132.05, -1488.3, 18.69},
	
	--jujo
	{2308.83, -1718.44, 14.33},
	{2326.68, -1719.27, 13.55},
	{2385.55, -1714.64, 13.75},
	{2402.75, -1718.01, 13.63},

	{2374.62, -1785.13, 13.55},
	{2301.71, -1785.69, 13.56},
	{2338.29, -1785.35, 13.55},
	{2518.9, -1679, 14.62},
	{2512.55, -1689.29, 13.55},
	{2495.59, -1686.74, 13.52},
	{2520, -1661.74, 14.43},
	{2508.54, -1654.81, 13.59},
	{2498.27, -1646.67, 13.54},
	{2486.33, -1649.04, 13.61},
	{2469.37, -1648.64, 13.47},
	{2451.74, -1644.65, 13.46},
	{2413.83, -1649.7, 13.54},
	{2393.37, -1649.32, 13.55},
	{2362.74, -1647.63, 13.54},
	{2409.13, -1670.87, 13.57},
	{2384.73, -1671.13, 14.57},
	{2365.38, -1669.78, 13.55},
	{2330.19, -1682.1, 14.43},
	{2306.97, -1676.1, 13.86},
	{2281.34, -1647.77, 15.2},
	{2256.86, -1646.58, 15.5},
	{2238.68, -1643.24, 15.49},
	{2167.62, -1673.23, 15.08},
	{2241.8, -1884.47, 13.55},
	{2269.25, -1884.57, 13.55},
	{2438.04, -2018.29, 13.55},
	{2465.3, -2017.24, 13.55},
	{2486.49, -2018.67, 13.55},
	{2483.48, -2000.7, 13.55},
	{2508.13, -2001.12, 13.55},
	{2521.09, -2000.67, 13.55},
	{2521.5, -2017.41, 13.55},
	{2507.73, -2018.38, 13.55},
	{2486.7, -2019.49, 13.55},
	{2465.31, -2019.01, 13.55},
	{2695.54, -2017.94, 13.53},
	{2696.07, -1994.67, 13.55},
	{2675.19, -1994.24, 13.55},
	{2652.98, -1992.98, 13.56},
	{2639.03, -1993.53, 13.55},
	{2638.47, -2011.03, 13.55},
	{2647.79, -2021.85, 13.55},
	{2674.29, -2013.64, 13.55},
	{2693.51, -2013.14, 13.55},
	{2779.23, -1970.26, 13.55},
	{2783.79, -1926.04, 13.55},
	{2754.69, -1935.85, 13.55},
	{2754.52, -1963.02, 13.55},
	{1849.27, -1919.74, 15.03},

	{2069.32, -1628.84, 13.88},
	{2068.67, -1643.83, 13.55},
	{2067.88, -1656.54, 13.55},
	{2012.51, -1656.63, 13.55},
	{2015.43, -1641.67, 13.78},
	{2017.04, -1629.91, 13.55},

	{2016.14, -1703.14, 14.06},
	{2013.89, -1717.02, 13.55},
	{2012.45, -1732.92, 13.78},
	{2068.67, -1731.88, 13.88},
	{2068.81, -1717.16, 13.55},
	{2067.71, -1703.5, 14.15},

	{1986.62, -1719.18, 15.97},
	{1987.07, -1683.23, 15.97},
	{2012.53, -1595.84, 13.58},
	{2003.43, -1595.01, 13.58},
	{1987.52, -1606.11, 13.53},
	{1974.76, -1672.8, 15.97},
	{1973.15, -1656.33, 15.97},
	{1972.2, -1636.37, 15.97},

	{1910.2, -1602.64, 13.55},
	{1863.64, -1600.24, 13.7},
	{1960.49, -1562.46, 13.6},

	{2139.88, -1650.36, 15.09},
	{2162.77, -1658.82, 15.09},
	{2157.15, -1613.91, 14.2},
	{2141.99, -1608.05, 14.15},
	{2175.95, -1598.75, 14.35},
	{2272.56, -1785.65, 13.55}
}


function startRappi(thePlayer)
	if getElementData(thePlayer,"Job") == "Stunter" then 
		exports.NGMessages:sendClientMessage ("[Rappi]Se te ha asignado un pedido en el icono R",0,255,0)
		setElementData(thePlayer,"Rappi",true)
		x, y, z = unpack ( buyPosLS [ math.random ( #buyPosLS ) ] )
		marker = createMarker ( x , y, z-1, "cylinder", 1.5, 255, 0, 0, 170 )
		blip = createBlipAttachedTo(marker, 34)
		addEventHandler ( "onClientMarkerHit", marker, onMarkerHit )
	end
end

function onMarkerHit (hitPlayer ) 
	if hitPlayer == localPlayer then
		if isElement ( marker ) then 
			destroyElement ( marker ) 
			destroyElement(blip)
			exports.NGMessages:sendClientMessage ("[Rappi]Has recojido el pedido, entregalo en el icono R",0,255,0) 
			x1, y1, z1 = unpack ( deliverPosLS [ math.random ( #deliverPosLS ) ] )
			markerDeliver = createMarker ( x1 , y1, z1-1, "cylinder", 1.5, 255, 0, 0, 170 )
			ped = createPed(math.random(0,312),x1,y1,z1)
			blipDeliver = createBlipAttachedTo(markerDeliver, 34)
			addEventHandler ( "onClientMarkerHit", markerDeliver, onMarkerDeliverHit )
		end 
		
		marker = nil 
		blip = nil
	end
end
--Give Reward 
function onMarkerDeliverHit(hitPlayer)
	if hitPlayer == localPlayer then
		local vehicle = getPedOccupiedVehicle ( hitPlayer )
		if vehicle then 
			if getElementModel(vehicle) == 448 then
				if isElement(markerDeliver) then
					local jobRanked = getElementData(localPlayer, "Job Rank")
					mult = 1
					if jobRanked == "Visajoso" then
						mult = 1
					elseif jobRanked == "RappiNoob" then
						mult = 1.1
					elseif jobRanked == "Piquete" then
					mult = 1.2
					elseif jobRanked == "Arraquetilla" then
						mult = 1.3
					elseif jobRanked == "Sorner" then
						mult = 1.4
					elseif jobRanked == "Piquete PRO" then
						mult = 1.5
					elseif jobRanked == "Rappi Stunter" then
						mult = 1.6
					elseif jobRanked == "Stunter PRO" then
						mult = 1.7
					elseif jobRanked == "Azotante" then
						mult = 1.8
					elseif jobRanked == "OnFire" then
						mult = 1.9
					elseif jobRanked == "RappiStuntMaster" then
						mult = 2
					end
					local money = math.floor((getDistanceBetweenPoints2D(x,y, x1,y1)*3.2+9500)*mult)
					destroyElement(markerDeliver)
					destroyElement(blipDeliver)
					destroyElement(ped)
					exports.NGMessages:sendClientMessage ("[Rappi]Has entregado el pedido y has ganado "..tostring(money)..", bien hecho.",0,255,0)
					triggerServerEvent ( "NGJobs->GivePlayerMoney", hitPlayer, hitPlayer, money, false )
					triggerServerEvent ( "NGJobs->SQL->UpdateColumn", hitPlayer, hitPlayer, "stunts", "AddOne" )
					setElementData(hitPlayer,"Rappi",false)
					startRappi(hitPlayer)
				end
				
				markerDeliver = nil
				blipDeliver = nil
				ped = nil 
			else
				exports.NGMessages:sendClientMessage ("[Rappi]Debes estar en la moto pizzaboy para entregar el pedido.",255,0,0)
			end
		else
			exports.NGMessages:sendClientMessage ("[Rappi]Debes estar en la moto pizzaboy para entregar el pedido.",255,0,0)
		end
	end
end
--Start Rappi
addEventHandler("onClientVehicleEnter", getRootElement(),
    function(thePlayer, seat)
        if thePlayer == getLocalPlayer() then
            if getElementData(thePlayer,"Job") == "Stunter" and getElementModel(source) == 448 then
				if getElementData(thePlayer,"Rappi") ~= true then
					startRappi(thePlayer)
				end
			end
        end
    end
)

addEventHandler( "onResourceStop", resourceRoot,
    function( resource )
		setElementData(localPlayer,"Rappi",false)
   end
)