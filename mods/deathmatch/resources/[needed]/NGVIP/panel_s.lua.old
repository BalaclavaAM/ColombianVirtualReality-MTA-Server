root = getRootElement ()
players = {}
players = getElementsByType ( "player" )
local vipCars = {}
local vehTimers = {}
function applyClothing ( incredibleTable )
	if getPlayerSkin ( source ) ~= 0 then
		 setPlayerSkin ( source, 0 )
	end

	count = 0
	while count ~= 18 do
		
		if tostring(incredibleTable[count].storedValue) == "x" then
			removePlayerClothes ( source, count )
		elseif tostring(incredibleTable[count].storedValue) ~= "" then --blank fields do nothing
			texture, model = getClothesByTypeIndex ( count, tostring(incredibleTable[count].storedValue) )
			addPlayerClothes ( source, texture, model, count )  
			--outputChatBox ( "texture: "..texture.."       model: "..model.."       count: "..count )
		end
		count = count + 1
	end
	if tostring(incredibleTable[18].storedValue) ~= "" then
		setPlayerStat ( source, 21, incredibleTable[18].storedValue )
		--outputChatBox ( "Fat stuff triggered" )
	end
	if tostring(incredibleTable[19].storedValue) ~= "" then
		setPlayerStat ( source, 23, incredibleTable[19].storedValue )
		--outputChatBox ( "Strong stuff triggered" )
	end	
end
addEvent("applyClothes", true, "incredibleTable" )
addEventHandler("applyClothes", getRootElement(), applyClothing)

function setWeaponSpray()
	giveWeapon ( client ,41,9999,true )
end
addEvent( "setSpray", true ) 
addEventHandler("setSpray", root , setWeaponSpray)

function setSHealth()
	setElementHealth(client, 200)
end
addEvent( "setHealth", true ) 
addEventHandler("setHealth", root , setSHealth)

function setSArmour()
	setPedArmor ( client, 100 )
end
addEvent( "setArmour", true ) 
addEventHandler("setArmour", root , setSArmour)

function giveSVehicle(id,cmd)
	if isTimer( vehTimers[client] ) then
		outputChatBox("Espera un momento...", client, 255,0,0)
	else
		if cmd == "spawn" then
			local x, y, z = getElementPosition ( client )
			if not isElement(vipCars[client]) then
				vipCars[client] =  createVehicle ( id, x+3, y+3, z )
				if id == 411 then
					addVehicleUpgrade ( vipCars[client], 1010 )
				end
			else
				destroyElement(vipCars[client])
			end
			 vehTimers[client] = setTimer( function () end,3000,1)
		elseif cmd == "rainbow" then
			if isElement(vipCars[client]) then
				local r, g, b = math.random( 255 ), math.random( 255 ), math.random( 255 )
				setVehicleColor( vipCars[client], r, g, b )
			end
		end
	end
end
addEvent( "giveVehicle", true ) 
addEventHandler("giveVehicle", root , giveSVehicle)

function updateFightStyle(id)
	setPedFightingStyle ( client, id )
end
addEvent( "updateFight", true ) 
addEventHandler("updateFight", root , updateFightStyle)

function setPStats()
	for stat = 69, 79 do 
		setPedStat( client, stat, 1000)
	end 
end
addEvent( "giveStats", true ) 
addEventHandler("giveStats", root ,setPStats)